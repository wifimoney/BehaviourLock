/* ─── Base ───────────────────────────────────────────────────────────────── */
* { box-sizing: border-box; }
body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }

/* ─── Tab buttons ────────────────────────────────────────────────────────── */
.tab-btn {
  @apply px-4 py-2.5 text-sm font-medium text-gray-500 border-b-2 border-transparent
         transition-colors whitespace-nowrap;
}
.tab-btn:hover:not(:disabled) {
  @apply text-gray-300;
}
.tab-btn.active {
  @apply text-accent-light border-accent;
}
.tab-btn:disabled {
  @apply opacity-40 cursor-not-allowed;
}

/* ─── Buttons ────────────────────────────────────────────────────────────── */
.btn-primary {
  @apply px-5 py-2 bg-accent hover:bg-accent-light text-white text-sm font-medium
         rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
}
.btn-accent {
  @apply px-4 py-2 bg-accent/20 hover:bg-accent/30 text-accent-light text-sm font-medium
         rounded-lg border border-accent/30 transition-colors;
}
.btn-sm {
  @apply px-2.5 py-1 bg-bg-card border border-gray-700 text-gray-400 text-xs
         rounded-md hover:bg-bg-hover hover:text-white transition-colors;
}

/* ─── Step indicators ────────────────────────────────────────────────────── */
.step {
  @apply flex flex-col items-center gap-1.5;
}
.step-circle {
  @apply w-9 h-9 rounded-full bg-bg border-2 border-gray-700 flex items-center justify-center
         text-xs font-semibold text-gray-500 transition-all duration-300;
}
.step-label {
  @apply text-xs text-gray-500 transition-colors duration-300;
}
.step-line {
  @apply flex-1 h-0.5 bg-gray-800 mt-[-18px] mx-1 transition-colors duration-300;
}

/* Step states */
.step.active .step-circle {
  @apply border-accent bg-accent/20 text-accent-light;
  animation: pulse-ring 1.5s ease-in-out infinite;
}
.step.active .step-label { @apply text-accent-light; }

.step.done .step-circle {
  @apply border-safe bg-safe/20 text-safe;
}
.step.done .step-label { @apply text-safe; }

.step-line.done { @apply bg-safe; }

.step.error .step-circle {
  @apply border-blocked bg-blocked/20 text-blocked;
}
.step.error .step-label { @apply text-blocked; }

@keyframes pulse-ring {
  0%, 100% { box-shadow: 0 0 0 0 rgba(99,102,241,0.4); }
  50%      { box-shadow: 0 0 0 8px rgba(99,102,241,0); }
}

/* ─── Toast ──────────────────────────────────────────────────────────────── */
.toast {
  @apply px-4 py-3 rounded-lg text-sm shadow-lg border max-w-sm;
  animation: slide-in 0.3s ease-out;
}
.toast-success { @apply bg-safe/10 border-safe/30 text-safe; }
.toast-error   { @apply bg-blocked/10 border-blocked/30 text-blocked; }
.toast-info    { @apply bg-accent/10 border-accent/30 text-accent-light; }

@keyframes slide-in {
  from { transform: translateX(100%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}
@keyframes slide-out {
  from { transform: translateX(0);    opacity: 1; }
  to   { transform: translateX(100%); opacity: 0; }
}

/* ─── Verdict badges ─────────────────────────────────────────────────────── */
.verdict-safe    { @apply bg-safe/20 text-safe border border-safe/30; }
.verdict-risky   { @apply bg-risky/20 text-risky border border-risky/30; }
.verdict-blocked { @apply bg-blocked/20 text-blocked border border-blocked/30; }

/* ─── Badges ─────────────────────────────────────────────────────────────── */
.badge {
  @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-medium;
}
.badge-green  { @apply bg-safe/20 text-safe; }
.badge-red    { @apply bg-blocked/20 text-blocked; }
.badge-yellow { @apply bg-risky/20 text-risky; }
.badge-blue   { @apply bg-accent/20 text-accent-light; }
.badge-gray   { @apply bg-gray-700/50 text-gray-400; }

/* ─── Cards ──────────────────────────────────────────────────────────────── */
.result-card {
  @apply bg-bg-card rounded-xl border border-gray-800 p-5;
}

/* ─── Code blocks ────────────────────────────────────────────────────────── */
.code-block {
  @apply rounded-lg overflow-hidden text-sm;
}
.code-block pre {
  @apply p-4 overflow-x-auto;
  max-height: 400px;
}

/* ─── Accordion ──────────────────────────────────────────────────────────── */
.accordion-header {
  @apply flex items-center justify-between w-full text-left px-4 py-3 bg-bg-card
         border border-gray-800 rounded-lg hover:bg-bg-hover transition-colors cursor-pointer;
}
.accordion-header.open {
  @apply rounded-b-none border-b-0;
}
.accordion-body {
  @apply border border-t-0 border-gray-800 rounded-b-lg overflow-hidden;
}
.accordion-arrow {
  @apply w-4 h-4 text-gray-500 transition-transform duration-200;
}
.accordion-header.open .accordion-arrow {
  transform: rotate(90deg);
}

/* ─── Tables ─────────────────────────────────────────────────────────────── */
.data-table {
  @apply w-full text-sm;
}
.data-table thead th {
  @apply text-left text-xs text-gray-500 uppercase tracking-wider px-4 py-2 border-b border-gray-800;
}
.data-table tbody td {
  @apply px-4 py-3 border-b border-gray-800/50;
}
.data-table tbody tr:hover {
  @apply bg-bg-hover/50;
}

/* ─── Progress bar ───────────────────────────────────────────────────────── */
.progress-bar {
  @apply w-full h-2.5 bg-gray-800 rounded-full overflow-hidden;
}
.progress-fill {
  @apply h-full rounded-full transition-all duration-500;
}

/* ─── Risk meter ─────────────────────────────────────────────────────────── */
.risk-meter {
  @apply relative w-full h-4 rounded-full overflow-hidden;
  background: linear-gradient(90deg, #22c55e 0%, #f59e0b 50%, #ef4444 100%);
}
.risk-needle {
  @apply absolute top-[-2px] w-1 h-5 bg-white rounded shadow-lg transition-all duration-700;
}

/* ─── Diff2html overrides for dark theme ─────────────────────────────────── */
.d2h-wrapper { background: transparent !important; }
.d2h-file-header { background: #1a1d2e !important; color: #e5e7eb !important; border-color: #374151 !important; }
.d2h-file-diff { border-color: #374151 !important; }
.d2h-code-line { background: #0f1117 !important; color: #d1d5db !important; }
.d2h-code-side-line { background: #0f1117 !important; color: #d1d5db !important; }
.d2h-code-line-prefix { background: #0f1117 !important; color: #6b7280 !important; }
.d2h-code-side-line-prefix { background: #0f1117 !important; color: #6b7280 !important; }
.d2h-del { background: rgba(239,68,68,0.1) !important; }
.d2h-ins { background: rgba(34,197,94,0.1) !important; }
.d2h-info { background: #1a1d2e !important; color: #9ca3af !important; }
.d2h-emptyplaceholder { background: #0f1117 !important; }
.d2h-code-linenumber { background: #1a1d2e !important; color: #6b7280 !important; border-color: #374151 !important; }
.d2h-code-side-linenumber { background: #1a1d2e !important; color: #6b7280 !important; border-color: #374151 !important; }

/* ─── Gauge ──────────────────────────────────────────────────────────────── */
.gauge-ring {
  transition: stroke-dashoffset 1s ease-out;
}

/* ─── Scrollbar ──────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #374151; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #4b5563; }

/* ─── Drop zone active state ─────────────────────────────────────────────── */
.drop-active {
  @apply border-accent bg-accent/5;
}
